<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{%  block title %}{% endblock %}小区物业管理系统</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity=
            "sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <script> src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"</script>

    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity=
            "sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin=
            "anonymous"></script>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">

    {% block head %}{% endblock %}

</head>

<body>
    <nav class="navbar navbar-default">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                </button>
              <a class="navbar-brand" href="#">
                  <img class="logo" src="{{ url_for('static', filename= 'images/default-avatar.png') }}" alt="">
              </a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav">
                <li class="active"><a href="/">首页 <span class="sr-only">(current)</span></a></li>
                  <li><a href="{{ url_for('post.view_posts') }}">公告栏</a></li>
                <li><a href="{{ url_for('post.new_post') }}">发布帖子</a></li>
              </ul>

              <ul class="nav navbar-nav navbar-right">
                  {% if user %}
                      <li><a href="{{ url_for('user.profile') }}">{{ user.username }}</a></li>

                      {% if user.is_admin %}
                          <!-- 仅对管理员用户可见 -->
                          <li><a href="{{ url_for('admin.publish_notice') }}">发布通知</a></li>
                          <li><a href="">消息列表</a></li>
                          <li><a href="{{ url_for('admin.user_approval') }}">审核注册</a></li>
                      {% endif %}

                      <li><a href="{{ url_for('auth.logout') }}">注销</a></li>
                  {% else %}
                      <li><a href="{{ url_for('auth.login') }}">登录</a></li>
                      <li><a href="{{ url_for('auth.register') }}">注册</a></li>
                  {% endif %}
              </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>

    <!-- 错误提示框 -->
    {% with fmsgs = get_flashed_messages(with_categories=true) %}
        {% if fmsgs %}
            <div class="error-message-container">
            <ul>
                {% for category, fmsg in fmsgs %}
                <li class="error-message">{{ fmsg }}</li>
              {% endfor %}
            </ul>
            </div>
        {% endif %}
    {% endwith %}

    <div class='main'>
         {% block main %}{% endblock %}
    </div>

</body>
</html>
